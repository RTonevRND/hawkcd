<!--Copyright (C) 2016 R&D Solutions Ltd.-->

<!--Licensed under the Apache License, Version 2.0 (the "License");-->
<!--you may not use this file except in compliance with the License.-->
<!--You may obtain a copy of the License at-->

<!--http://www.apache.org/licenses/LICENSE-2.0-->

<!--Unless required by applicable law or agreed to in writing, software-->
<!--distributed under the License is distributed on an "AS IS" BASIS,-->
<!--WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.-->
<!--See the License for the specific language governing permissions and-->
<!--limitations under the License.-->

<h3 class="page-title"> Profile</h3>
<div class="page-bar ">
    <ul class="page-breadcrumb ">
        <li>
            <i class="icon-home"></i>
            <a> <span>Profile</span></a>
        </li>
    </ul>
</div>

<div class="portlet light">
    <div class="portlet-title">
        <div class="caption">
            <i class="fa fa-user"></i> {{user.defaultText.pageHeader}}
        </div>
        <div class="tools right">
            <a href="javascript:;" class="collapse"> </a>
        </div>
    </div>
    <div class="portlet-body">
        <div id="profileSettings" style="padding: 0 0 10px 10px">
            <form name="editUser">
                <div style="width: 300px">
                    <!-- <div class="form-group form-md-line-input">
                        <input type="text" class="form-control" ng-model="user.updatedUser.UserName" required>
                        <label>Username</label>
                    </div> -->
                    <div class="form-group form-md-line-input">
                        <span type="text" class="form-control">{{user.currentlyLoggedUser.username}}</span>
                        <label>Email</label>
                    </div>
                    <div class="form-group form-md-line-input">
                        <label class="control-label">Current Password</label>
                        <input type="password" class="form-control" ng-model="user.newPasswordObject.oldPassword" ng-pattern="/^[0-9A-Za-z.-]{3,32}$/" required/>
                    </div>
                    <div class="form-group form-md-line-input">
                        <label class="control-label">New Password</label>
                        <input type="password" class="form-control" ng-model="user.newPasswordObject.newPassword" ng-minlength="3" ng-maxlength="32" name="newPassword" ng-pattern="/^[0-9A-Za-z.-]{3,32}$/" required/>
                    </div>
                    <div class="form-group">
                      <p ng-show="editUser.newPassword.$error.minlength" class="alert alert-danger">
                        Password must be minimum 3 symbols.
                      </p>
                      <p ng-show="editUser.newPassword.$error.maxlength" class="alert alert-danger">
                        Password must be maximum 32 symbols.
                      </p>
                      <p ng-show="!(editUser.newPassword.$error.maxlength) && !(editUser.newPassword.$error.minlength) && editUser.newPassword.$error.pattern" class="alert alert-danger">
                        Forbidden password characters!
                      </p>
                    </div>
                    <div class="form-group form-md-line-input">
                        <label class="control-label">Re-type New Password</label>
                        <input type="password" class="form-control" ng-model="user.newPasswordObject.confirmNewPassword" name="confirmPassword" ng-pattern="{{user.newPasswordObject.newPassword}}" required/>
                    </div>
                    <div class="form-group">
                      <p ng-show="(user.newPasswordObject.newPassword != user.newPasswordObject.confirmNewPassword) && editUser.confirmPassword.$touched && editUser.confirmPassword.$invalid" class="alert alert-danger">
                        Passwords does not match!
                      </p>
                    </div>
                    <div class="margin-top-10">
                        <button class="btn green-sharp" ng-disabled="editUser.$invalid" ng-click="user.updateUserPassword(user.newPasswordObject)">Change Password</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>


<div ng-include src="'app/profile/views/partials/_change-password.html'"></div>
