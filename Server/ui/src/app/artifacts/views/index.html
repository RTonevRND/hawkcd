<h3 class="page-title"> Artifacts</h3>
<div class="portlet light">
    <div class="portlet-title right">
        <div class="caption ng-binding">
            <i class="fa fa-cogs"></i>Artifacts
        </div>
    </div>
    <div class="portlet-body">
        <div class="row">
            <div class="input-group input-group-lg add-on custom-search-artifact">
                <input type="text" class="form-control search-query custom-line-height" style="width:30%" ng-model="artifact.query" ng-change="artifact.search()" ng-pattern="/^([\w-]+)$/" placeholder="Search">
            </div>
            <div class="col-sm-12">
                <uib-accordion close-others="true" id="pipelineDefinitionAccordion" class="custom-accordion">
                    <div uib-accordion-group class="run-item custom-accordion accordion-heading-fix pointer" id="pipelineDefinitionGroup{{$index}}"
                         is-open="artifact.isDefinitionGroupOpen[$index]"
                         is-disabled="true"
                         ng-repeat="pipeline in artifact.allPipelineRuns"
                         ng-click="artifact.openAccordion(artifact.isDefinitionGroupOpen, $index);artifact.clearSelection()">
                        <!-- pipelines container-->
                        <uib-accordion-heading id="accordionHeading" style="margin:0!important;padding:0!important;">

                            <div class="col-sm-2 pull-left padding-0">
                                <div class="display-inline-block pull-left" style="height:65px">
                                    <div class="run-item-container status-passed pull-left" ng-class="{'status-passed': pipeline.status == 'PASSED', 'status-failed' : pipeline.status == 'FAILED', 'status-working' : pipeline.status == 'IN_PROGRESS', 'status-canceled' : pipeline.status == 'CANCELED'}">
                                    </div>
                                </div>
                            <div class="vertical-center-artifact pull-left padding-left-5">
                                <h5 class="accordion-heading-fix"> #{{pipeline.executionId}} {{pipeline.pipelineDefinitionName.substring(0,30)}} <span ng-if="pipeline.pipelineDefinitionName.length > 30">...</span></h5>
                            </div>
                            </div>

                            <div class="col-sm-8 pull-left padding-0">
                                <div class="display-inline-block pull-left" style="height:65px">
                                    <div class="run-item-container pull-left" style="border-left:1px solid black;">
                                    </div>
                                </div>
                                <div class="vertical-center-artifact pull-left padding-left-1">
                                    <span ng-repeat="material in pipeline.materials">
                                        <h5 class="accordion-heading-fix">
                                            <i class="fa fa-gg"></i>
                                            <a target="_blank" href="{{material.gitLink}}" ng-click="artifact.goToGitLink(material.gitLink);$event.stopPropagation()" class="green-jungle">

                                            <span>{{material.materialDefinition.commitId.substring(0,6)}}</span></a>
                                            <span> {{material.materialDefinition.comments}}</span>
                                        </h5>
                                    </span>
                                </div>
                            </div>
                            <div class="col-sm-2 pull-left padding-0">
                                <div class="display-inline-block pull-left" style="height:65px">
                                    <div class="run-item-container pull-left" style="border-left:1px solid black;">
                                    </div>
                                </div>
                                <div class="pull-left padding-left-5">
                                    <span class="accordion-heading-fix"><h5 class="padding-bottom-5"><i class="fa fa-user"></i>  {{pipeline.materials[0].materialDefinition.authorName}}</h5></span>
                                    <span class="accordion-heading-fix"><h5 class="padding-top-1"><i class="fa fa-calendar"></i> <span ng-if="pipeline.lastStage.localEndTime != null">  {{pipeline.lastStage.localEndTime.hour.toLocaleString('en-US', {minimumIntegerDigits: 2, useGrouping:false})}}:{{pipeline.lastStage.localEndTime.minute.toLocaleString('en-US', {minimumIntegerDigits: 2, useGrouping:false})}}:{{pipeline.lastStage.localEndTime.second.toLocaleString('en-US', {minimumIntegerDigits: 2, useGrouping:false})}} on {{pipeline.lastStage.localEndDate.date}}/{{pipeline.lastRun.lastStage.localEndDate.months}}/{{pipeline.lastStage.localEndDate.years}}</span></h5></span>
                                </div>
                            </div>
                        </uib-accordion-heading>

                        <div class="col-sm-12 mouse" ng-click="$event.stopPropagation()">
                            <div class="nav-justified">
                                <div id="jstree" js-tree="treeConfig" ng-model="treeData" should-apply="ignoreModelChanges()" tree="treeInstance" tree-events-obj="treeEventsObj">

                                </div>
                            </div>
                        </div>
                    </div>
                </uib-accordion>
            </div>
        </div>
    </div>
</div>
